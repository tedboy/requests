

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.13. Streaming Requests &mdash; Requests API</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Requests API" href="index.html"/>
        <link rel="up" title="3. Advanced Usage" href="official_doc.user.advanced.html"/>
        <link rel="next" title="3.14. Proxies" href="adv14.html"/>
        <link rel="prev" title="3.12. Custom Authentication" href="adv12.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Requests API
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="generated/requests.html">requests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user_guide.html">The User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="official_doc.user.intro.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="official_doc.user.quickstart.html">2. Quickstart</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="official_doc.user.advanced.html">3. Advanced Usage</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="adv1.html">3.1. Session Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv2.html">3.2. Request and Response Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv3.html">3.3. Prepared Requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv4.html">3.4. SSL Cert Verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv5.html">3.5. CA Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv6.html">3.6. Body Content Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv7.html">3.7. Keep-Alive</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv8.html">3.8. Streaming Uploads</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv9.html">3.9. Chunk-Encoded Requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv10.html">3.10. POST Multiple Multipart-Encoded Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv11.html">3.11. Event Hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv12.html">3.12. Custom Authentication</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">3.13. Streaming Requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv14.html">3.14. Proxies</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv15.html">3.15. Compliance</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv16.html">3.16. HTTP Verbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv17.html">3.17. Link Headers</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv18.html">3.18. Transport Adapters</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv19.html">3.19. Blocking Or Non-Blocking?</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv20.html">3.20. Header Ordering</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv21.html">3.21. Timeouts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="official_doc.user.authentication.html">4. Authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="official_doc.html">Other Stuffs from official doc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Requests API</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="user_guide.html">The User Guide</a> &raquo;</li>
        
          <li><a href="official_doc.user.advanced.html">3. Advanced Usage</a> &raquo;</li>
        
      <li>3.13. Streaming Requests</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/adv13.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="streaming-requests">
<span id="id1"></span><h1>3.13. Streaming Requests<a class="headerlink" href="#streaming-requests" title="Permalink to this headline">Â¶</a></h1>
<p>With <a class="reference internal" href="generated/generated/requests.Response.iter_lines.html#requests.Response.iter_lines" title="requests.Response.iter_lines"><code class="xref py py-meth docutils literal"><span class="pre">Response.iter_lines()</span></code></a> you can easily
iterate over streaming APIs such as the <a class="reference external" href="https://dev.twitter.com/streaming/overview">Twitter Streaming
API</a>. Simply
set <code class="docutils literal"><span class="pre">stream</span></code> to <code class="docutils literal"><span class="pre">True</span></code> and iterate over the response with
<a class="reference internal" href="generated/generated/requests.Response.iter_lines.html#requests.Response.iter_lines" title="requests.Response.iter_lines"><code class="xref py py-meth docutils literal"><span class="pre">iter_lines()</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/stream/20&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_lines</span><span class="p">():</span>

    <span class="c1"># filter out keep-alive new lines</span>
    <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><a class="reference internal" href="generated/generated/requests.Response.iter_lines.html#requests.Response.iter_lines" title="requests.Response.iter_lines"><code class="xref py py-meth docutils literal"><span class="pre">iter_lines()</span></code></a> is not reentrant safe.
Calling this method multiple times causes some of the received data
being lost. In case you need to call it from multiple places, use
the resulting iterator object instead:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">lines</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_lines</span><span class="p">()</span>
<span class="c1"># Save the first line for later or just skip it</span>

<span class="n">first_line</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="adv14.html" class="btn btn-neutral float-right" title="3.14. Proxies" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="adv12.html" class="btn btn-neutral" title="3.12. Custom Authentication" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>